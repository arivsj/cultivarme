<!DOCTYPE html>

<html lang="pt-BR">

<head>

    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Cultivarme</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>

        /* Reset e Variáveis de Cor */

        :root {

            --primary: #8ECAE6;

            --secondary: #219EBC;

            --accent: #023047;

            --light: #FFB703;

            --bright: #FB8500;

            --history: #4CAF50;

            --white: #FFFFFF;

            --gray: #F5F5F5;

            --text: #333333;

            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);

        }

        * {

            margin: 0;

            padding: 0;

            box-sizing: border-box;

            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;

        }

        body {

            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);

            color: var(--text);

            line-height: 1.6;

            min-height: 100vh;

            padding: 20px;

        }

        .container {

            max-width: 100%;

            margin: 0 auto;

        }

        /* Cards e Seções */

        .card {

            background-color: var(--white);

            border-radius: 15px;

            padding: 20px;

            margin-bottom: 20px;

            box-shadow: var(--shadow);

            transition: transform 0.3s ease;

        }

        .card:hover {

            transform: translateY(-5px);

        }

        .welcome-card {

            text-align: center;

            background-color: rgba(255, 255, 255, 0.9);

            backdrop-filter: blur(10px);

        }

        /* Cabeçalhos */

        h1, h2, h3 {

            color: var(--accent);

            margin-bottom: 15px;

        }

        h1 {

            font-size: 1.8rem;

            display: flex;

            align-items: center;

            justify-content: center;

            gap: 10px;

        }

        h2 {

            font-size: 1.5rem;

            border-bottom: 2px solid var(--light);

            padding-bottom: 8px;

        }

        /* Formulários e Inputs */

        input, textarea {

            width: 100%;

            padding: 12px;

            margin-bottom: 15px;

            border: 1px solid #ddd;

            border-radius: 8px;

            font-size: 1rem;

            transition: border 0.3s ease;

        }

        input:focus, textarea:focus {

            border-color: var(--secondary);

            outline: none;

            box-shadow: 0 0 0 2px rgba(33, 158, 188, 0.2);

        }

        textarea {

            min-height: 100px;

            resize: vertical;

        }

        /* Botões */

        button {

            background-color: var(--secondary);

            color: white;

            border: none;

            border-radius: 8px;

            padding: 12px 20px;

            font-size: 1rem;

            cursor: pointer;

            transition: background-color 0.3s ease;

            display: flex;

            align-items: center;

            justify-content: center;

            gap: 8px;

            width: 100%;

            margin-top: 10px;

        }

        button:hover {

            background-color: var(--accent);

        }

        button.secondary {

            background-color: var(--light);

            color: var(--accent);

        }

        button.secondary:hover {

            background-color: var(--bright);

            color: white;

        }

        /* Navegação */

        .nav-buttons {

            display: flex;

            gap: 10px;

            margin-top: 20px;

        }

        .nav-buttons button {

            flex: 1;

        }

        /* Seções Ocultas */

        .flow-section {

            display: none;

        }

        .active {

            display: block;

            animation: fadeIn 0.5s ease;

        }

        @keyframes fadeIn {

            from { opacity: 0; transform: translateY(10px); }

            to { opacity: 1; transform: translateY(0); }

        }

        /* Mensagens */

        .message {

            padding: 10px;

            border-radius: 8px;

            margin-bottom: 15px;

            text-align: center;

        }

        .affirmation {

            background-color: rgba(255, 183, 3, 0.2);

            border-left: 4px solid var(--light);

            font-style: italic;

            text-align: center;

            padding: 15px;

            margin: 15px 0;

        }

        /* Listas */

        .gratitude-list {

            display: flex;

            flex-direction: column;

            gap: 10px;

        }

        .gratitude-list ol {

            padding-left: 10px;

        }

        .habit-options {

            display: flex;

            flex-direction: column;

            gap: 10px;

        }

        .habit-option {

            padding: 15px;

            border: 1px solid #ddd;

            border-radius: 8px;

            cursor: pointer;

            transition: all 0.3s ease;

        }

        .habit-option:hover {

            background-color: rgba(142, 202, 230, 0.2);

            border-color: var(--primary);

        }

        .habit-option.selected {

            background-color: rgba(33, 158, 188, 0.2);

            border-color: var(--secondary);

        }

        /* Progresso */

        .progress-container {

            margin: 20px 0;

        }

        .week-progress {

            display: flex;

            justify-content: space-between;

            margin-top: 10px;

        }

        .day {

            width: 40px;

            height: 40px;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            background-color: #eee;

            font-weight: bold;

        }

        .day.completed {

            background-color: var(--light);

            color: var(--accent);

        }

        /* Histórico */

        .history-section {

            margin-top: 30px;

        }

        .history-label {

            text-align: center;

            font-size: 1.5rem;

            color: var(--accent);

            margin-bottom: 15px;

            display: flex;

            align-items: center;

            justify-content: center;

            gap: 10px;

        }

        .history-item {

            border-left: 4px solid var(--secondary);

            padding: 15px;

            margin-bottom: 15px;

            background-color: #FFFFFF;

            border-radius: 8px;

        }

        .history-date {

            font-weight: bold;

            color: var(--accent);

            margin-bottom: 8px;

            display: flex;

            justify-content: space-between;

            align-items: center;

        }

        .history-type {

            background-color: var(--light);

            color: var(--accent);

            padding: 3px 8px;

            border-radius: 12px;

            font-size: 0.8rem;

        }

        .history-content {

            margin-top: 10px;

        }

        .history-content ol {

            padding-left: 25px;

            margin-left: 10px;

        }

        .empty-history {

            text-align: center;

            padding: 30px;

            color: var(--accent);

            opacity: 0.7;

        }

        /* Status de Conclusão */

        .completion-badge {

            background-color: var(--history);

            color: white;

            padding: 5px 10px;

            border-radius: 20px;

            font-size: 0.8rem;

            display: inline-block;

            margin-left: 10px;

        }

        .flow-completion {

            display: flex;

            align-items: center;

            gap: 8px;

            margin-top: 10px;

            color: var(--history);

            font-weight: bold;

        }

        /* Aviso de Privacidade */

        .privacy-notice {

            font-size: 0.8rem;

            text-align: center;

            margin-top: 20px;

            color: var(--accent);

            opacity: 0.7;

        }

        /* Modal Timeline */

        .modal-overlay {

            display: none;

            position: fixed;

            top: 0;

            left: 0;

            width: 100%;

            height: 100%;

            background-color: rgba(0, 0, 0, 0.7);

            z-index: 1000;

            overflow-y: auto;

        }

        .modal-overlay.active {

            display: flex;

            align-items: center;

            justify-content: center;

            padding: 20px;

        }

        .modal-content {

            background-color: var(--white);

            border-radius: 15px;

            padding: 30px;

            max-width: 600px;

            width: 100%;

            max-height: 90vh;

            overflow-y: auto;

            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);

            animation: modalSlideIn 0.3s ease;

        }

        @keyframes modalSlideIn {

            from { opacity: 0; transform: translateY(-30px); }

            to { opacity: 1; transform: translateY(0); }

        }

        .modal-header {

            display: flex;

            justify-content: space-between;

            align-items: center;

            margin-bottom: 20px;

            border-bottom: 2px solid var(--light);

            padding-bottom: 15px;

        }

        .modal-header h2 {

            margin: 0;

            color: var(--accent);

        }

        .modal-close {

            background: none;

            border: none;

            font-size: 1.5rem;

            cursor: pointer;

            color: var(--accent);

            padding: 0;

            width: auto;

            margin: 0;

        }

        .modal-close:hover {

            color: var(--bright);

        }

        .timeline {

            position: relative;

            padding-left: 30px;

        }

        .timeline::before {

            content: '';

            position: absolute;

            left: 10px;

            top: 0;

            bottom: 0;

            width: 3px;

            background: linear-gradient(to bottom, var(--primary), var(--secondary));

        }

        .timeline-item {

            position: relative;

            margin-bottom: 30px;

            padding-left: 20px;

        }

        .timeline-item::before {

            content: '';

            position: absolute;

            left: -24px;

            top: 5px;

            width: 20px;

            height: 20px;

            border-radius: 50%;

            background-color: var(--white);

            border: 3px solid var(--secondary);

        }

        .timeline-item.current::before {

            background-color: var(--light);

            border-color: var(--bright);

            box-shadow: 0 0 0 4px rgba(251, 133, 0, 0.2);

        }

        .timeline-item.current .timeline-content {

            background-color: rgba(255, 183, 3, 0.1);

            border-left: 4px solid var(--light);

        }

        .timeline-content {

            background-color: var(--gray);

            padding: 15px;

            border-radius: 8px;

            border-left: 4px solid var(--primary);

        }

        .timeline-content h3 {

            margin: 0 0 10px 0;

            color: var(--accent);

            font-size: 1.1rem;

        }

        .timeline-content p {

            margin: 5px 0;

            font-size: 0.9rem;

        }

        .current-badge {

            display: inline-block;

            background-color: var(--bright);

            color: white;

            padding: 3px 10px;

            border-radius: 12px;

            font-size: 0.75rem;

            margin-left: 8px;

            font-weight: bold;

        }

        /* Modo de Edição de Ordem */

        .timeline-item.editable {

            cursor: pointer;

            transition: all 0.3s ease;

        }

        .timeline-item.editable:hover {

            transform: translateX(5px);

            background-color: rgba(142, 202, 230, 0.1);

            border-radius: 8px;

        }

        .timeline-item.selected-for-order {

            background-color: rgba(33, 158, 188, 0.2);

            border-radius: 8px;

        }

        .order-badge {

            position: absolute;

            top: -10px;

            right: -10px;

            background-color: var(--secondary);

            color: white;

            width: 30px;

            height: 30px;

            border-radius: 50%;

            display: flex;

            align-items: center;

            justify-content: center;

            font-weight: bold;

            font-size: 1rem;

            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);

            z-index: 10;

        }

        .info-button {

            background-color: var(--light);

            color: var(--accent);

            padding: 8px 16px;

            font-size: 0.9rem;

            margin-top: 15px;

        }

        .info-button:hover {

            background-color: var(--bright);

            color: white;

        }

        /* Responsividade */

        @media (min-width: 768px) {

            .container {

                max-width: 600px;

            }

            

            h1 {

                font-size: 2.2rem;

            }

            

            .nav-buttons {

                flex-direction: row;

            }

        }

    </style>

</head>

<body>

    <div class="container">

        <!-- Cabeçalho -->

        <div class="welcome-card card">

            <h1><i class="fas fa-heart"></i> Cultivarme</h1>

            <p>Seu refúgio digital para bem-estar e autoconfiança</p>

            <button class="info-button" onclick="showWeekTimeline()">

                <i class="fas fa-sort"></i> Ordene Desafios

            </button>

            <div class="privacy-notice">

                <i class="fas fa-lock"></i> Sua privacidade é total. Todas as informações ficam salvas apenas no seu navegador.

            </div>

        </div>

        <!-- Modal Timeline -->

        <div id="timeline-modal" class="modal-overlay" onclick="closeTimelineModal(event)">

            <div class="modal-content" onclick="event.stopPropagation()">

                <div class="modal-header">

                    <h2><i class="fas fa-calendar-alt"></i> Jornada de 6 Desafios</h2>

                    <button class="modal-close" onclick="closeTimelineModal()">

                        <i class="fas fa-times"></i>

                    </button>

                </div>

                <p style="margin-bottom: 20px; color: var(--accent);">

                    Sua jornada de autoconfiança está dividida em 6 desafios temáticos. Cada desafio oferece 3 opções de hábitos diários para você escolher e praticar.

                </p>

                <div style="margin-bottom: 20px; display: flex; gap: 10px;">

                    <button id="edit-order-btn" class="secondary" onclick="toggleEditMode()">

                        <i class="fas fa-edit"></i> Editar Ordem

                    </button>

                    <button id="save-order-btn" class="secondary" onclick="saveWeekOrder()" style="display: none;">

                        <i class="fas fa-save"></i> Salvar Ordem

                    </button>

                    <button id="cancel-order-btn" class="secondary" onclick="cancelEditMode()" style="display: none;">

                        <i class="fas fa-times"></i> Cancelar

                    </button>

                </div>

                <div class="timeline" id="timeline-content">

                    <!-- Conteúdo da timeline será inserido aqui via JavaScript -->

                </div>

            </div>

        </div>

        <!-- Card do Fluxo 1: Check-in Diário -->

        <div class="card">

            <div class="flow-header">

                <h2><i class="fas fa-sun"></i> Check-in Diário</h2>

                <div id="flow-1-completion" class="flow-completion" style="display: none;">

                    <i class="fas fa-check-circle"></i> Concluído hoje

                </div>

            </div>

            

            <!-- Fluxo 1: Check-in Diário -->

            <div id="flow-1">

                <!-- Página Inicial do Check-in -->

                <div id="checkin-home" class="flow-section active">

                    <p>Como você está se sentindo hoje? Descreva em uma ou duas palavras:</p>

                    <input type="text" id="feeling-input" placeholder="Ex: Ansioso, Otimista, Cansado...">

                    <button onclick="showFlowSection('affirmation-module', 1)">Continuar <i class="fas fa-arrow-right"></i></button>

                </div>

                <!-- Módulo de Afirmação -->

                <div id="affirmation-module" class="flow-section">

                    <h3><i class="fas fa-comment-dots"></i> Afirmação do Dia</h3>

                    <div id="affirmation-text" class="affirmation">

                        <!-- Afirmação será inserida aqui via JavaScript -->

                    </div>

                    <button onclick="generateNewAffirmation()"><i class="fas fa-sync-alt"></i> Gerar Nova Afirmação</button>

                    <div class="nav-buttons">

                        <button class="secondary" onclick="showFlowSection('checkin-home', 1)"><i class="fas fa-arrow-left"></i> Voltar</button>

                        <button class="secondary" onclick="showFlowSection('gratitude-module', 1)">Continuar <i class="fas fa-arrow-right"></i></button>

                    </div>

                </div>

                <!-- Módulo de Gratidão -->

                <div id="gratitude-module" class="flow-section">

                    <h3><i class="fas fa-star"></i> Pelo que você é grato(a) hoje?</h3>

                    <p>Liste 3 coisas, por menores que sejam:</p>

                    <div class="gratitude-list">

                        <input type="text" id="gratitude-1" placeholder="Ex: O café da manhã">

                        <input type="text" id="gratitude-2" placeholder="Ex: Uma música que ouvi">

                        <input type="text" id="gratitude-3" placeholder="Ex: Ter uma cama confortável">

                    </div>

                    <div class="nav-buttons">

                        <button class="secondary" onclick="showFlowSection('affirmation-module', 1)"><i class="fas fa-arrow-left"></i> Voltar</button>

                        <button class="secondary" onclick="showFlowSection('achievement-module', 1)">Continuar <i class="fas fa-arrow-right"></i></button>

                    </div>

                </div>

                <!-- Módulo de Conquista -->

                <div id="achievement-module" class="flow-section">

                    <h3><i class="fas fa-trophy"></i> Sua Vitória do Dia</h3>

                    <p>Qual foi uma pequena vitória sua hoje? (ou o que você planeja conquistar?)</p>

                    <input type="text" id="achievement-input" placeholder="Ex: Terminei uma tarefa difícil">

                    <div class="nav-buttons">

                        <button class="secondary" onclick="showFlowSection('gratitude-module', 1)"><i class="fas fa-arrow-left"></i> Voltar</button>

                        <button class="secondary" onclick="showSummary(1)">Ver Resumo <i class="fas fa-file-alt"></i></button>

                    </div>

                </div>

                <!-- Página de Resumo -->

                <div id="summary-page" class="flow-section">

                    <h3><i class="fas fa-check-circle"></i> Seu Resumo Diário</h3>

                    <div id="summary-content">

                        <!-- Conteúdo do resumo será inserido aqui via JavaScript -->

                    </div>

                    <div class="nav-buttons">

                        <button onclick="downloadSummary()"><i class="fas fa-download"></i> Baixar Resumo</button>

                        <button class="secondary" onclick="saveAndFinishFlow(1)"><i class="fas fa-check"></i> Salvar e Finalizar</button>

                    </div>

                </div>

            </div>

        </div>

        <!-- Card do Fluxo 2: Construtor de Hábitos -->

        <div class="card">

            <div class="flow-header">

                <h2><i class="fas fa-seedling"></i> Construtor de Hábitos</h2>

                <div id="flow-2-completion" class="flow-completion" style="display: none;">

                    <i class="fas fa-check-circle"></i> Concluído hoje

                </div>

            </div>

            

            <!-- Fluxo 2: Construtor de Hábitos -->

            <div id="flow-2">

                <!-- Página Inicial do Construtor de Hábitos -->

                <div id="habits-home" class="flow-section active">

                    <div id="week-theme">

                        <!-- Tema da semana será inserido aqui via JavaScript -->

                    </div>

                    <button onclick="showFlowSection('habit-selection', 2)">Começar <i class="fas fa-play"></i></button>

                </div>

                <!-- Seleção de Hábitos -->

                <div id="habit-selection" class="flow-section">

                    <h3><i class="fas fa-tasks"></i> Escolha seu Hábito de Hoje</h3>

                    <div class="habit-options">

                        <div class="habit-option" onclick="selectHabit('A')">

                            <h4>Hábito A</h4>

                            <p id="habit-a-desc">Descrição do hábito A</p>

                        </div>

                        <div class="habit-option" onclick="selectHabit('B')">

                            <h4>Hábito B</h4>

                            <p id="habit-b-desc">Descrição do hábito B</p>

                        </div>

                        <div class="habit-option" onclick="selectHabit('C')">

                            <h4>Hábito C</h4>

                            <p id="habit-c-desc">Descrição do hábito C</p>

                        </div>

                    </div>

                    <div class="nav-buttons">

                        <button class="secondary" onclick="showFlowSection('habits-home', 2)"><i class="fas fa-arrow-left"></i> Voltar</button>

                        <button class="secondary" id="continue-habit-btn" disabled onclick="showFlowSection('habit-execution', 2)">Continuar <i class="fas fa-arrow-right"></i></button>

                    </div>

                </div>

                <!-- Execução do Hábito -->

                <div id="habit-execution" class="flow-section">

                    <h3 id="habit-execution-title"><i class="fas fa-pen"></i> Execução do Hábito</h3>

                    <div id="habit-instructions">

                        <!-- Instruções serão inseridas aqui via JavaScript -->

                    </div>

                    <textarea id="habit-reflection" placeholder="Escreva suas reflexões aqui..."></textarea>

                    <div class="nav-buttons">

                        <button class="secondary" onclick="showFlowSection('habit-selection', 2)"><i class="fas fa-arrow-left"></i> Voltar</button>

                        <button onclick="completeHabit()"><i class="fas fa-check"></i> Concluí o Hábito de Hoje!</button>

                    </div>

                </div>

                <!-- Progresso da Semana -->

                <div id="week-progress" class="flow-section">

                    <h3><i class="fas fa-chart-line"></i> Meu Progresso no Desafio</h3>

                    <div class="progress-container">

                        <div class="week-progress" id="week-days">

                            <!-- Dias da semana serão inseridos aqui via JavaScript -->

                        </div>

                    </div>

                    <div id="reflections-list">

                        <!-- Reflexões serão inseridas aqui via JavaScript -->

                    </div>

                    <div class="nav-buttons">

                        <button onclick="downloadWeekReport()"><i class="fas fa-download"></i> Baixar Relatório</button>

                        <button class="secondary" onclick="saveAndFinishFlow(2)"><i class="fas fa-check"></i> Salvar e Finalizar</button>

                    </div>

                </div>

            </div>

        </div>

        <!-- Seção de Histórico (Sempre Visível) -->

        <div class="history-section">

            <div class="history-label">

                <i class="fas fa-history"></i> Histórico

            </div>

            <div id="history-content">

                <!-- Conteúdo do histórico será inserido aqui via JavaScript -->

            </div>

        </div>

    </div>

    <script>

        // Dados do aplicativo

        const appData = {

            currentFeeling: '',

            affirmation: '',

            gratitudes: ['', '', ''],

            achievement: '',

            selectedHabit: '',

            habitReflection: '',

            weekProgress: {},

            history: [],

            startDate: null,

            customWeekOrder: null,

            todayCompletions: {

                flow1: false,

                flow2: false

            }

        };

        // Banco de afirmações positivas

        const affirmations = [

            "Eu controlo minha respiração e encontro calma no presente. Esta ansiedade não me define.",

            "Cada respiração me traz mais paz e tranquilidade. Estou seguro(a) neste momento.",

            "Minha mente está calma e meu corpo está relaxado. Tudo está bem agora.",

            "Eu honro meu corpo descansando quando preciso. Meu cansaço é temporário.",

            "Minha energia se renova a cada respiração. Encontro força dentro de mim.",

            "Eu mereço descanso e recarregar minhas energias. Estou cuidando de mim com amor.",

            "O universo conspira a meu favor. Coisas boas estão a caminho.",

            "Minha positividade atrai experiências maravilhosas para minha vida.",

            "Hoje é um dia cheio de possibilidades e alegrias. Estou aberto(a) a tudo de bom.",

            "Eu mereço amor, felicidade e paz interior.",

            "Sou capaz de superar qualquer desafio que apareça no meu caminho.",

            "Cada dia é uma nova oportunidade para crescer e brilhar.",

            "Minha confiança cresce a cada respiração. Sou forte e resiliente.",

            "Aceito-me exatamente como sou neste momento. Sou suficiente.",

            // Baseadas em Small Wins e Domínio de Competência

            "Cada pequena vitória que conquisto prova minha capacidade e fortalece minha confiança.",

            "Celebro cada tarefa concluída, por menor que seja. Cada passo conta.",

            "Meu histórico de sucessos cresce a cada dia. Eu sou capaz de realizar.",

            "Divido grandes desafios em pequenas ações. Assim, tudo se torna possível.",

            "Cada meta alcançada é evidência concreta da minha competência.",

            "Reconheço e celebro meu progresso. Estou construindo um caminho de conquistas.",

            // Baseadas em Reestruturação Cognitiva

            "Questiono meus pensamentos negativos. Eles não são fatos, são apenas pensamentos.",

            "Substituo autocrítica por autocompaixão. Mereço gentileza, especialmente de mim mesmo(a).",

            "Já superei desafios no passado. Tenho evidências reais da minha capacidade.",

            "Não estou catastrofizando. Estou focado(a) no que posso controlar agora.",

            "Meus erros são oportunidades de aprendizado, não provas de incapacidade.",

            "Escolho pensamentos que me fortalecem, não que me paralisam.",

            // Baseadas em Visualização e Ensaio Mental

            "Visualizo meu sucesso com clareza. Meu cérebro já conhece o caminho.",

            "Imagino-me superando obstáculos com calma e competência. Estou preparado(a).",

            "Pratico mentalmente meu sucesso. Quando chegar a hora, estarei pronto(a).",

            "Vejo-me lidando com adversidades com confiança. Sou resiliente.",

            "Minha mente e corpo trabalham juntos para alcançar meus objetivos.",

            // Baseadas em Modelagem e Aprendizado Social

            "Se outros conseguiram, eu também posso. O sucesso é alcançável.",

            "Aprendo com a jornada de quem já trilhou este caminho. Não estou sozinho(a).",

            "Busco inspiração em modelos que me mostram que é possível crescer.",

            "Cada pessoa de sucesso já foi iniciante. Estou no meu próprio caminho.",

            // Baseadas em Linguagem Corporal e Postura de Poder

            "Minha postura reflete minha confiança. Ocupo meu espaço com segurança.",

            "Meu corpo influencia minha mente. Quando me posiciono com poder, me sinto poderoso(a).",

            "Mantenho contato visual e sorrio. Projeto a confiança que sinto por dentro.",

            "Minha linguagem corporal comunica: eu sou capaz, eu estou presente.",

            // Baseadas em Autocompaixão

            "Trato-me com a mesma gentileza que ofereceria a um bom amigo.",

            "Errar faz parte da experiência humana. Sou gentil comigo mesmo(a) nos momentos difíceis.",

            "Reconheço minha dor sem dramatizar. Isto também passará.",

            "Aprendo com meus erros sem me punir. Cada falha me ensina algo valioso.",

            "Minha humanidade inclui imperfeições. E está tudo bem.",

            "Falo comigo com compaixão. Mereço meu próprio apoio e compreensão."

        ];

        // Hábitos da semana

        const weekHabits = {

            "Desafio 1: Foco no Autocuidado": {

                'A': "Fazer uma pausa de 10 minutos para meditar ou apenas respirar fundo.",

                'B': "Escrever 5 qualidades que você admira em si mesmo.",

                'C': "Fazer uma caminhada de 15 minutos ouvindo sua música favorita."

            },

            "Desafio 2: Cultivando a Autoconfiança": {

                'A': "Completar a frase 'Hoje eu me orgulho de...' com três coisas.",

                'B': "Fazer algo que vem adiando há algum tempo, por menor que seja.",

                'C': "Listar três conquistas pessoais das quais se orgulha."

            },

            "Desafio 3: Praticando a Autocompaixão": {

                'A': "Escrever uma carta gentil para si mesmo(a) como se fosse para um amigo querido.",

                'B': "Identificar um erro recente e anotar 3 aprendizados que ele trouxe.",

                'C': "Praticar o mantra: 'Sou humano(a), posso errar, e ainda assim sou digno(a) de amor.'"

            },

            "Desafio 4: Pequenas Vitórias Diárias": {

                'A': "Definir uma meta minúscula para hoje e celebrar ao completá-la.",

                'B': "Anotar 3 pequenas conquistas do dia, por menores que pareçam.",

                'C': "Criar uma lista de 'Já Consegui' com 10 coisas que você já realizou na vida."

            },

            "Desafio 5: Conexão Mente-Corpo": {

                'A': "Praticar 2 minutos de postura de poder antes de uma atividade importante.",

                'B': "Fazer 5 minutos de alongamento consciente prestando atenção nas sensações.",

                'C': "Sorrir para si mesmo(a) no espelho e dizer uma afirmação positiva."

            },

            "Desafio 6: Desafiando Pensamentos Limitantes": {

                'A': "Identificar um pensamento negativo e questionar: 'Qual a evidência real disso?'",

                'B': "Substituir 'Eu não consigo' por 'Ainda não consegui, mas estou aprendendo'.",

                'C': "Anotar 3 vezes em que você superou algo que achava impossível."

            }

        };

        // Inicialização

        document.addEventListener('DOMContentLoaded', function() {

            loadAppData();

            initializeHabitsModule();

            updateCompletionStatus();

            updateHistoryContent();

            initializeWeekTracking();

        });

        // Funções do Modal Timeline

        let editMode = false;

        let selectedOrder = [];

        let originalWeekOrder = null;

        function showWeekTimeline() {

            const modal = document.getElementById('timeline-modal');

            editMode = false;

            selectedOrder = [];

            renderTimeline();

            modal.classList.add('active');

            

            // Resetar botões

            document.getElementById('edit-order-btn').style.display = 'block';

            document.getElementById('save-order-btn').style.display = 'none';

            document.getElementById('cancel-order-btn').style.display = 'none';

        }

        function renderTimeline() {

            const timelineContent = document.getElementById('timeline-content');

            const weekThemes = getOrderedWeekThemes();

            const currentWeek = getCurrentWeek();

            

            let timelineHTML = '';

            

            weekThemes.forEach((theme, index) => {

                const originalIndex = Object.keys(weekHabits).indexOf(theme);

                const weekNumber = originalIndex + 1;

                const displayNumber = index + 1;

                const isCurrent = displayNumber === currentWeek;

                const habits = weekHabits[theme];

                const isSelected = selectedOrder.includes(theme);

                const orderNumber = selectedOrder.indexOf(theme) + 1;

                

                timelineHTML += `

                    <div class="timeline-item ${isCurrent ? 'current' : ''} ${editMode ? 'editable' : ''} ${isSelected ? 'selected-for-order' : ''}" 

                         data-theme="${theme}" 

                         onclick="${editMode ? `selectWeekForOrder('${theme}')` : ''}">

                        ${isSelected && editMode ? `<div class="order-badge">${orderNumber}</div>` : ''}

                        <div class="timeline-content">

                            <h3>

                                ${theme}

                                ${isCurrent ? '<span class="current-badge">DESAFIO ATUAL</span>' : ''}

                            </h3>

                            <p><strong>Hábito A:</strong> ${habits['A']}</p>

                            <p><strong>Hábito B:</strong> ${habits['B']}</p>

                            <p><strong>Hábito C:</strong> ${habits['C']}</p>

                        </div>

                    </div>

                `;

            });

            

            timelineContent.innerHTML = timelineHTML;

        }

        function getOrderedWeekThemes() {

            if (appData.customWeekOrder && appData.customWeekOrder.length === 6) {

                return appData.customWeekOrder;

            }

            return Object.keys(weekHabits);

        }

        function toggleEditMode() {

            editMode = true;

            selectedOrder = [];

            originalWeekOrder = getOrderedWeekThemes();

            

            document.getElementById('edit-order-btn').style.display = 'none';

            document.getElementById('save-order-btn').style.display = 'block';

            document.getElementById('cancel-order-btn').style.display = 'block';

            

            renderTimeline();

        }

        function selectWeekForOrder(theme) {

            if (!editMode) return;

            

            const index = selectedOrder.indexOf(theme);

            

            if (index > -1) {

                // Remove da seleção

                selectedOrder.splice(index, 1);

            } else {

                // Adiciona à seleção

                if (selectedOrder.length < 6) {

                    selectedOrder.push(theme);

                }

            }

            

            renderTimeline();

        }

        function saveWeekOrder() {

            if (selectedOrder.length !== 6) {

                alert('Por favor, selecione todos os 6 desafios na ordem desejada.');

                return;

            }

            

            appData.customWeekOrder = [...selectedOrder];

            appData.startDate = new Date().getTime(); // Reinicia a contagem

            saveAppData();

            

            editMode = false;

            selectedOrder = [];

            

            document.getElementById('edit-order-btn').style.display = 'block';

            document.getElementById('save-order-btn').style.display = 'none';

            document.getElementById('cancel-order-btn').style.display = 'none';

            

            renderTimeline();

            initializeHabitsModule(); // Atualiza o card de hábitos

            

            alert('Ordem salva com sucesso! Sua jornada foi reiniciada.');

        }

        function cancelEditMode() {

            editMode = false;

            selectedOrder = [];

            

            document.getElementById('edit-order-btn').style.display = 'block';

            document.getElementById('save-order-btn').style.display = 'none';

            document.getElementById('cancel-order-btn').style.display = 'none';

            

            renderTimeline();

        }

        function closeTimelineModal(event) {

            const modal = document.getElementById('timeline-modal');

            modal.classList.remove('active');

        }

        function getCurrentWeek() {

            // Verifica se já existe uma semana salva

            if (!appData.startDate) {

                appData.startDate = new Date().getTime();

                saveAppData();

            }

            

            const startDate = new Date(appData.startDate);

            const today = new Date();

            const diffTime = Math.abs(today - startDate);

            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

            const weekNumber = Math.min(Math.ceil(diffDays / 7), 6);

            

            return weekNumber || 1;

        }

        function initializeWeekTracking() {

            if (!appData.startDate) {

                appData.startDate = new Date().getTime();

                saveAppData();

            }

        }

        // Funções de Navegação

        function showFlowSection(sectionId, flowNumber) {

            // Esconder todas as seções do fluxo

            const flowElement = document.getElementById(`flow-${flowNumber}`);

            const sections = flowElement.getElementsByClassName('flow-section');

            for (let section of sections) {

                section.classList.remove('active');

            }

            

            // Mostrar a seção solicitada

            document.getElementById(sectionId).classList.add('active');

            

            // Se for a seção de afirmação, gerar uma afirmação

            if (sectionId === 'affirmation-module') {

                generateAffirmation();

            }

        }

        function saveAndFinishFlow(flowNumber) {

            if (flowNumber === 1) {

                saveCheckinToHistory();

                appData.todayCompletions.flow1 = true;

            } else {

                saveHabitToHistory();

                appData.todayCompletions.flow2 = true;

            }

            

            // Resetar dados do fluxo ANTES de salvar

            resetFlowData(flowNumber);

            

            saveAppData();

            updateCompletionStatus();

            updateHistoryContent();

            

            // Voltar para a primeira tela do fluxo

            showFlowSection(flowNumber === 1 ? 'checkin-home' : 'habits-home', flowNumber);

        }

        function resetFlowData(flowNumber) {

            if (flowNumber === 1) {

                // Limpar dados do appData

                appData.currentFeeling = '';

                appData.affirmation = '';

                appData.gratitudes = ['', '', ''];

                appData.achievement = '';

                

                // Limpar todos os campos de input

                document.getElementById('feeling-input').value = '';

                document.getElementById('gratitude-1').value = '';

                document.getElementById('gratitude-2').value = '';

                document.getElementById('gratitude-3').value = '';

                document.getElementById('achievement-input').value = '';

                

                // Limpar texto da afirmação

                document.getElementById('affirmation-text').textContent = '';

                

                // Limpar conteúdo do resumo

                document.getElementById('summary-content').innerHTML = '';

            } else {

                // Limpar dados do appData

                appData.selectedHabit = '';

                appData.habitReflection = '';

                

                // Limpar seleção de hábitos

                document.querySelectorAll('.habit-option').forEach(opt => {

                    opt.classList.remove('selected');

                });

                

                // Desabilitar botão de continuar

                document.getElementById('continue-habit-btn').disabled = true;

                

                // Limpar campo de reflexão

                document.getElementById('habit-reflection').value = '';

                

                // Limpar instruções do hábito

                document.getElementById('habit-instructions').innerHTML = '';

            }

        }

        function updateCompletionStatus() {

            const flow1Completion = document.getElementById('flow-1-completion');

            const flow2Completion = document.getElementById('flow-2-completion');

            

            flow1Completion.style.display = appData.todayCompletions.flow1 ? 'flex' : 'none';

            flow2Completion.style.display = appData.todayCompletions.flow2 ? 'flex' : 'none';

        }

        // Funções do Fluxo 1: Check-in Diário

        function generateAffirmation() {

            const feeling = document.getElementById('feeling-input').value.trim().toLowerCase();

            if (!feeling) {

                alert('Por favor, descreva como você está se sentindo.');

                return;

            }

            appData.currentFeeling = feeling;

            

            // Selecionar uma afirmação aleatória do array

            const randomIndex = Math.floor(Math.random() * affirmations.length);

            appData.affirmation = affirmations[randomIndex];

            

            document.getElementById('affirmation-text').textContent = appData.affirmation;

        }

        function generateNewAffirmation() {

            // Garantir que seja uma afirmação diferente da atual

            let newAffirmation;

            do {

                const randomIndex = Math.floor(Math.random() * affirmations.length);

                newAffirmation = affirmations[randomIndex];

            } while (newAffirmation === appData.affirmation && affirmations.length > 1);

            

            appData.affirmation = newAffirmation;

            document.getElementById('affirmation-text').textContent = appData.affirmation;

        }

        function showSummary(flowNumber) {

            // Salvar gratidões e conquista

            appData.gratitudes[0] = document.getElementById('gratitude-1').value;

            appData.gratitudes[1] = document.getElementById('gratitude-2').value;

            appData.gratitudes[2] = document.getElementById('gratitude-3').value;

            appData.achievement = document.getElementById('achievement-input').value;

            

            const today = new Date();

            const dateStr = today.toLocaleDateString('pt-BR');

            

            const summaryHTML = `

                <p><strong>Data:</strong> ${dateStr}</p>

                <p><strong>Meu Sentimento:</strong> ${appData.currentFeeling}</p>

                <p><strong>Afirmação do Dia:</strong> "${appData.affirmation}"</p>

                <p><strong>Minha Gratidão:</strong></p>

                <ol>

                    <li>${appData.gratitudes[0] || '(não preenchido)'}</li>

                    <li>${appData.gratitudes[1] || '(não preenchido)'}</li>

                    <li>${appData.gratitudes[2] || '(não preenchido)'}</li>

                </ol>

                <p><strong>Minha Vitória:</strong> ${appData.achievement || '(não preenchido)'}</p>

            `;

            

            document.getElementById('summary-content').innerHTML = summaryHTML;

            showFlowSection('summary-page', flowNumber);

        }

        function saveCheckinToHistory() {

            const today = new Date();

            const historyItem = {

                type: 'checkin',

                date: today.toLocaleDateString('pt-BR'),

                timestamp: today.getTime(),

                data: {

                    feeling: appData.currentFeeling,

                    affirmation: appData.affirmation,

                    gratitudes: [...appData.gratitudes],

                    achievement: appData.achievement

                }

            };

            

            appData.history.push(historyItem);

        }

        function downloadSummary() {

            const today = new Date();

            const dateStr = today.toLocaleDateString('pt-BR');

            

            let content = `CULTIVARME - RESUMO DIÁRIO\n`;

            content += `Data: ${dateStr}\n\n`;

            content += `Meu Sentimento: ${appData.currentFeeling}\n`;

            content += `Afirmação do Dia: "${appData.affirmation}"\n\n`;

            content += `Minha Gratidão:\n`;

            content += `1. ${appData.gratitudes[0] || '(não preenchido)'}\n`;

            content += `2. ${appData.gratitudes[1] || '(não preenchido)'}\n`;

            content += `3. ${appData.gratitudes[2] || '(não preenchido)'}\n\n`;

            content += `Minha Vitória: ${appData.achievement || '(não preenchido)'}\n\n`;

            content += `---\nLembre-se: sua jornada é única e valiosa. Continue praticando o autocuidado!`;

            

            downloadTextFile(content, `resumo-confiante-${dateStr.replace(/\//g, '-')}.txt`);

        }

        // Funções do Fluxo 2: Construtor de Hábitos

        function initializeHabitsModule() {

            // Inicializar tema da semana baseado na semana atual e ordem customizada

            const themes = getOrderedWeekThemes();

            const currentWeek = getCurrentWeek();

            const currentTheme = themes[currentWeek - 1] || themes[0];

            

            document.getElementById('week-theme').innerHTML = `

                <h3>${currentTheme}</h3>

                <p>Comprometa-se com pequenas ações diárias para fortalecer sua autoconfiança.</p>

                <p style="font-size: 0.9rem; color: var(--secondary); margin-top: 10px;">

                    <i class="fas fa-calendar-check"></i> Você está no desafio ${currentWeek} de 6

                </p>

            `;

            

            // Inicializar descrições dos hábitos

            document.getElementById('habit-a-desc').textContent = weekHabits[currentTheme]['A'];

            document.getElementById('habit-b-desc').textContent = weekHabits[currentTheme]['B'];

            document.getElementById('habit-c-desc').textContent = weekHabits[currentTheme]['C'];

            

            // Carregar progresso da semana

            loadWeekProgress();

        }

        function selectHabit(habit) {

            appData.selectedHabit = habit;

            

            // Remover seleção anterior

            document.querySelectorAll('.habit-option').forEach(opt => {

                opt.classList.remove('selected');

            });

            

            // Adicionar seleção atual

            event.currentTarget.classList.add('selected');

            

            // Habilitar botão de continuar

            document.getElementById('continue-habit-btn').disabled = false;

        }

        function completeHabit() {

            appData.habitReflection = document.getElementById('habit-reflection').value;

            

            // Registrar conclusão do hábito

            const today = new Date();

            const dayOfWeek = today.getDay();

            

            if (!appData.weekProgress) appData.weekProgress = {};

            appData.weekProgress[dayOfWeek] = {

                habit: appData.selectedHabit,

                reflection: appData.habitReflection,

                date: today.toLocaleDateString('pt-BR')

            };

            

            updateWeekProgressDisplay();

            showFlowSection('week-progress', 2);

        }

        function saveHabitToHistory() {

            const today = new Date();

            const themes = getOrderedWeekThemes();

            const currentWeek = getCurrentWeek();

            const currentTheme = themes[currentWeek - 1] || themes[0];

            

            const historyItem = {

                type: 'habit',

                date: today.toLocaleDateString('pt-BR'),

                timestamp: today.getTime(),

                data: {

                    theme: currentTheme,

                    habit: appData.selectedHabit,

                    description: weekHabits[currentTheme][appData.selectedHabit],

                    reflection: appData.habitReflection

                }

            };

            

            appData.history.push(historyItem);

        }

        function loadWeekProgress() {

            if (!appData.weekProgress) {

                appData.weekProgress = {};

            }

            updateWeekProgressDisplay();

        }

        function updateWeekProgressDisplay() {

            const weekDaysElement = document.getElementById('week-days');

            const reflectionsElement = document.getElementById('reflections-list');

            

            // Dias da semana

            const days = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb'];

            let weekDaysHTML = '';

            let reflectionsHTML = '<h4>Suas Reflexões</h4>';

            

            const today = new Date();

            const currentDay = today.getDay();

            

            for (let i = 0; i < 7; i++) {

                const isCompleted = appData.weekProgress[i];

                const isToday = i === currentDay;

                

                weekDaysHTML += `

                    <div class="day ${isCompleted ? 'completed' : ''} ${isToday ? 'today' : ''}">

                        ${isCompleted ? '<i class="fas fa-star"></i>' : days[i].charAt(0)}

                    </div>

                `;

                

                if (isCompleted) {

                    const habitData = appData.weekProgress[i];

                    const habitDesc = weekHabits[Object.keys(weekHabits)[0]][habitData.habit];

                    

                    reflectionsHTML += `

                        <div class="card" style="margin-top: 10px;">

                            <p><strong>${days[i]} - Hábito ${habitData.habit}</strong></p>

                            <p>${habitDesc}</p>

                            <p><em>"${habitData.reflection}"</em></p>

                        </div>

                    `;

                }

            }

            

            weekDaysElement.innerHTML = weekDaysHTML;

            reflectionsElement.innerHTML = reflectionsHTML;

        }

        function downloadWeekReport() {

            const today = new Date();

            const dateStr = today.toLocaleDateString('pt-BR');

            const themes = Object.keys(weekHabits);

            const currentTheme = themes[0];

            

            let content = `CULTIVARME - RELATÓRIO DO DESAFIO\n`;

            content += `Tema: ${currentTheme}\n`;

            content += `Data do relatório: ${dateStr}\n\n`;

            

            const days = ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'];

            let completedDays = 0;

            

            for (let i = 0; i < 7; i++) {

                if (appData.weekProgress[i]) {

                    completedDays++;

                    const habitData = appData.weekProgress[i];

                    const habitDesc = weekHabits[currentTheme][habitData.habit];

                    

                    content += `${days[i]} - Hábito ${habitData.habit}: CONCLUÍDO\n`;

                    content += `Descrição: ${habitDesc}\n`;

                    content += `Reflexão: ${habitData.reflection}\n\n`;

                } else {

                    content += `${days[i]}: Não realizado\n\n`;

                }

            }

            

            content += `RESUMO: ${completedDays}/7 dias concluídos\n`;

            content += `---\nContinue seu caminho de autoconhecimento e crescimento!`;

            

            downloadTextFile(content, `relatorio-desafio-${dateStr.replace(/\//g, '-')}.txt`);

        }

        // Funções do Histórico

        function updateHistoryContent() {

            const historyContent = document.getElementById('history-content');

            

            if (appData.history.length === 0) {

                historyContent.innerHTML = `

                    <div class="empty-history">

                        <i class="fas fa-history fa-3x" style="margin-bottom: 15px; opacity: 0.5;"></i>

                        <p>Seu histórico está vazio.</p>

                        <p>Complete um check-in diário ou um desafio de hábitos para começar seu histórico!</p>

                    </div>

                `;

                return;

            }

            

            // Ordenar histórico por data (mais recente primeiro)

            const sortedHistory = [...appData.history].sort((a, b) => b.timestamp - a.timestamp);

            

            let historyHTML = '';

            

            sortedHistory.forEach(item => {

                if (item.type === 'checkin') {

                    historyHTML += `

                        <div class="history-item">

                            <div class="history-date">

                                <span>${item.date}</span>

                                <span class="history-type">Check-in Diário</span>

                            </div>

                            <div class="history-content">

                                <p><strong>Sentimento:</strong> ${item.data.feeling}</p>

                                <p><strong>Afirmação:</strong> "${item.data.affirmation}"</p>

                                <p><strong>Gratidão:</strong></p>

                                <ol>

                                    <li>${item.data.gratitudes[0] || '(não preenchido)'}</li>

                                    <li>${item.data.gratitudes[1] || '(não preenchido)'}</li>

                                    <li>${item.data.gratitudes[2] || '(não preenchido)'}</li>

                                </ol>

                                <p><strong>Vitória:</strong> ${item.data.achievement || '(não preenchido)'}</p>

                            </div>

                        </div>

                    `;

                } else if (item.type === 'habit') {

                    historyHTML += `

                        <div class="history-item">

                            <div class="history-date">

                                <span>${item.date}</span>

                                <span class="history-type">Desafio de Hábito</span>

                            </div>

                            <div class="history-content">

                                <p><strong>Tema:</strong> ${item.data.theme}</p>

                                <p><strong>Hábito ${item.data.habit}:</strong> ${item.data.description}</p>

                                <p><strong>Reflexão:</strong> ${item.data.reflection}</p>

                            </div>

                        </div>

                    `;

                }

            });

            

            historyContent.innerHTML = historyHTML;

        }

        // Funções Auxiliares

        function downloadTextFile(content, filename) {

            const blob = new Blob([content], { type: 'text/plain' });

            const url = URL.createObjectURL(blob);

            const a = document.createElement('a');

            a.href = url;

            a.download = filename;

            document.body.appendChild(a);

            a.click();

            document.body.removeChild(a);

            URL.revokeObjectURL(url);

        }

        // Armazenamento Local

        function saveAppData() {

            localStorage.setItem('cultivarme', JSON.stringify(appData));

        }

        function loadAppData() {

            const savedData = localStorage.getItem('cultivarme');

            if (savedData) {

                const parsedData = JSON.parse(savedData);

                Object.assign(appData, parsedData);

                

                // Preencher campos se existirem dados

                if (appData.currentFeeling) {

                    document.getElementById('feeling-input').value = appData.currentFeeling;

                }

                if (appData.gratitudes[0]) {

                    document.getElementById('gratitude-1').value = appData.gratitudes[0];

                }

                if (appData.gratitudes[1]) {

                    document.getElementById('gratitude-2').value = appData.gratitudes[1];

                }

                if (appData.gratitudes[2]) {

                    document.getElementById('gratitude-3').value = appData.gratitudes[2];

                }

                if (appData.achievement) {

                    document.getElementById('achievement-input').value = appData.achievement;

                }

            }

        }

    </script>

</body>

</html>